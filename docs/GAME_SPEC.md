# NOT Gate 퍼즐 게임 기술 명세서

## 1. 게임 개요

### 1.1 컨셉
- **제목**: Not Game
- **장르**: 논리 퍼즐 게임
- **핵심 메커니즘**: NOT 게이트만을 사용하여 주어진 입력 신호를 목표 출력 신호로 변환

### 1.2 게임 목표
- 주어진 입력 패턴을 NOT 게이트들의 조합만으로 목표 출력 패턴으로 변환
- 최소한의 게이트 사용으로 효율적인 회로 구성
- 점진적으로 복잡해지는 스테이지 클리어

## 2. 핵심 게임플레이 메커니즘

### 2.1 기본 규칙
- **NOT 게이트**: 입력 신호를 반전 (0→1, 1→0)
- **제약사항**: 오직 NOT 게이트만 사용 가능
- **연결**: 게이트들을 와이어로 연결하여 신호 전달

### 2.2 게임 요소
1. **입력 신호**
   - 고정된 입력값 (꺼짐, 켜짐)
   - 다중 입력 라인 지원
   
2. **NOT 게이트**
   - not 버튼 활성화 후 화면 클릭으로 배치
   - 입력과 출력 포트 보유 (입력 3, 출력 1의 사각형)
   - 0.1초의 신호 출력 딜레이
   - 입력포트로는 신호를 전파하지 않으며, 입력으로 전달받은 신호를 반전시켜 출력 포트로 신호를 전파한다
   
3. **와이어**
   - 화면에 드래그로 설치 가능
   - 기본 상태는 가운데 점 하나, 다른 칸으로 드래그 시 현재 칸과 다음 칸에 서로 반선으로 연결 후 해당 칸의 신호를 전파
   
4. **출력 체크**
   - 목표 출력과 실제 출력 비교
   - 모든 출력이 일치하면 스테이지 클리어

5. **그리드**
   - 칸 하나당 하나의 좌표로 기록되어 관리된다
   - 칸 하나당 하나의 개체만 올 수 있다

### 2.3 난이도 진행
1. **초급**: 단일 입력/출력
2. **중급**: 다중 입력/출력, 신호 분기
3. **고급**: 복잡한 패턴, 게이트 수 제한
4. **도전**: 시간 제한, 특수 조건

## 3. 기술 스택

### 3.1 핵심 기술
- **언어**: C++20
- **그래픽**: SDL2 + OpenGL
- **UI**: Dear ImGui
- **빌드**: CMake

### 3.2 성능 최적화
- SIMD (AVX2) 신호 처리
- 멀티스레딩 시뮬레이션
- 메모리 풀링
- 공간 분할 렌더링

## 4. 주요 기능 명세

### 4.1 회로 에디터
- 그리드 기반 캔버스
- 게이트 팔레트
- 연결선 그리기 도구
- 실행/리셋 버튼
- 실시간 신호 시각화

### 4.2 레벨 시스템
- JSON 기반 레벨 정의
- 레벨 진행도 저장 (LocalStorage)
- 별점 시스템 (사용한 게이트 수 기준)

### 4.3 UI/UX
- 직관적인 드래그 앤 드롭
- 신호 흐름 애니메이션
- 힌트 시스템
- 튜토리얼 모드

## 5. 데이터 구조

### 5.1 회로 표현
```cpp
struct Circuit {
    std::vector<Gate> gates;
    std::vector<Wire> wires;
    std::vector<InputNode> inputs;
    std::vector<OutputNode> outputs;
};

struct Gate {
    uint32_t id;
    GateType type;  // NOT
    Vec2 position;
    uint32_t inputId;
    std::vector<uint32_t> outputIds;
};
```

### 5.2 최적화된 시뮬레이션 구조
```cpp
// 캐시 친화적 레이아웃
struct SimulationData {
    alignas(64) uint32_t* gateTypes;
    alignas(64) uint32_t* gateInputs;
    alignas(64) uint32_t* gateOutputs;
    alignas(64) uint8_t* signalValues;
};
```

